---
apiVersion: v1
kind: ConfigMap
metadata:
  name: vmagent-graphite-relabel
data:
  graphite-relabel.yaml: |
    # =============================================================================
    # Network metrics
    # =============================================================================
    # Network bytes: truenas.<instance>.net.<interface>.<direction>
    - action: graphite
      match: "truenas.*.net.*.*"
      labels:
        __name__: truenas_network_bytes_total
        instance: "$1"
        interface: "$2"
        direction: "$3"
    # Network packets: truenas.<instance>.net_packets.<interface>.<type>
    - action: graphite
      match: "truenas.*.net_packets.*.*"
      labels:
        __name__: truenas_network_packets_total
        instance: "$1"
        interface: "$2"
        type: "$3"
    # Network drops: truenas.<instance>.net_drops.<interface>.<direction>
    - action: graphite
      match: "truenas.*.net_drops.*.*"
      labels:
        __name__: truenas_network_drops_total
        instance: "$1"
        interface: "$2"
        direction: "$3"
    # Network carrier: truenas.<instance>.net_carrier.<interface>.<state>
    - action: graphite
      match: "truenas.*.net_carrier.*.*"
      labels:
        __name__: truenas_network_carrier
        instance: "$1"
        interface: "$2"
        state: "$3"
    # Network operstate: truenas.<instance>.net_operstate.<interface>.<state>
    - action: graphite
      match: "truenas.*.net_operstate.*.*"
      labels:
        __name__: truenas_network_operstate
        instance: "$1"
        interface: "$2"
        state: "$3"
    # Network duplex: truenas.<instance>.net_duplex.<interface>.<mode>
    - action: graphite
      match: "truenas.*.net_duplex.*.*"
      labels:
        __name__: truenas_network_duplex
        instance: "$1"
        interface: "$2"
        mode: "$3"
    # Network MTU: truenas.<instance>.net_mtu.<interface>.mtu
    - action: graphite
      match: "truenas.*.net_mtu.*.mtu"
      labels:
        __name__: truenas_network_mtu
        instance: "$1"
        interface: "$2"
    # Network speed: truenas.<instance>.net_speed.<interface>.speed
    - action: graphite
      match: "truenas.*.net_speed.*.speed"
      labels:
        __name__: truenas_network_speed
        instance: "$1"
        interface: "$2"

    # =============================================================================
    # CPU metrics
    # =============================================================================
    # CPU temperatures: truenas.<instance>.cputemp.temperatures.<cpu>
    - action: graphite
      match: "truenas.*.cputemp.temperatures.*"
      labels:
        __name__: truenas_cpu_temperature_celsius
        instance: "$1"
        cpu: "$2"
    # CPU usage: truenas.<instance>.truenas_cpu_usage.cpu.<cpu>
    - action: graphite
      match: "truenas.*.truenas_cpu_usage.cpu.*"
      labels:
        __name__: truenas_cpu_usage
        instance: "$1"
        cpu: "$2"

    # =============================================================================
    # Cgroup metrics
    # =============================================================================
    # Cgroup CPU: truenas.<instance>.cgroup_<id>.cpu.<mode>
    - action: graphite
      match: "truenas.*.cgroup_*.cpu.*"
      labels:
        __name__: truenas_cgroup_cpu_seconds_total
        instance: "$1"
        cgroup: "$2"
        mode: "$3"
    # Cgroup CPU limit: truenas.<instance>.cgroup_<id>.cpu_limit.used
    - action: graphite
      match: "truenas.*.cgroup_*.cpu_limit.used"
      labels:
        __name__: truenas_cgroup_cpu_limit_used
        instance: "$1"
        cgroup: "$2"
    # Cgroup throttled: truenas.<instance>.cgroup_<id>.throttled.throttled
    - action: graphite
      match: "truenas.*.cgroup_*.throttled.throttled"
      labels:
        __name__: truenas_cgroup_throttled
        instance: "$1"
        cgroup: "$2"
    # Cgroup throttled duration: truenas.<instance>.cgroup_<id>.throttled_duration.duration
    - action: graphite
      match: "truenas.*.cgroup_*.throttled_duration.duration"
      labels:
        __name__: truenas_cgroup_throttled_duration_seconds
        instance: "$1"
        cgroup: "$2"
    # Cgroup memory: truenas.<instance>.cgroup_<id>.mem.<type>
    - action: graphite
      match: "truenas.*.cgroup_*.mem.*"
      labels:
        __name__: truenas_cgroup_memory_bytes
        instance: "$1"
        cgroup: "$2"
        type: "$3"
    # Cgroup memory usage: truenas.<instance>.cgroup_<id>.mem_usage.<type>
    - action: graphite
      match: "truenas.*.cgroup_*.mem_usage.*"
      labels:
        __name__: truenas_cgroup_memory_usage_bytes
        instance: "$1"
        cgroup: "$2"
        type: "$3"
    # Cgroup memory usage limit: truenas.<instance>.cgroup_<id>.mem_usage_limit.<type>
    - action: graphite
      match: "truenas.*.cgroup_*.mem_usage_limit.*"
      labels:
        __name__: truenas_cgroup_memory_limit_bytes
        instance: "$1"
        cgroup: "$2"
        type: "$3"
    # Cgroup memory utilization: truenas.<instance>.cgroup_<id>.mem_utilization.utilization
    - action: graphite
      match: "truenas.*.cgroup_*.mem_utilization.utilization"
      labels:
        __name__: truenas_cgroup_memory_utilization
        instance: "$1"
        cgroup: "$2"
    # Cgroup IO: truenas.<instance>.cgroup_<id>.io.<direction>
    - action: graphite
      match: "truenas.*.cgroup_*.io.*"
      labels:
        __name__: truenas_cgroup_io_bytes_total
        instance: "$1"
        cgroup: "$2"
        direction: "$3"
    # Cgroup serviced ops: truenas.<instance>.cgroup_<id>.serviced_ops.<direction>
    - action: graphite
      match: "truenas.*.cgroup_*.serviced_ops.*"
      labels:
        __name__: truenas_cgroup_io_ops_total
        instance: "$1"
        cgroup: "$2"
        direction: "$3"
    # Cgroup page faults: truenas.<instance>.cgroup_<id>.pgfaults.<type>
    - action: graphite
      match: "truenas.*.cgroup_*.pgfaults.*"
      labels:
        __name__: truenas_cgroup_pgfaults_total
        instance: "$1"
        cgroup: "$2"
        type: "$3"
    # Cgroup writeback: truenas.<instance>.cgroup_<id>.writeback.<type>
    - action: graphite
      match: "truenas.*.cgroup_*.writeback.*"
      labels:
        __name__: truenas_cgroup_writeback_bytes
        instance: "$1"
        cgroup: "$2"
        type: "$3"
    # Cgroup CPU pressure (some): truenas.<instance>.cgroup_<id>.cpu_some_pressure.some_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.cpu_some_pressure.some_*"
      labels:
        __name__: truenas_cgroup_cpu_pressure_some
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup CPU pressure (full): truenas.<instance>.cgroup_<id>.cpu_full_pressure.full_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.cpu_full_pressure.full_*"
      labels:
        __name__: truenas_cgroup_cpu_pressure_full
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup CPU pressure stall time (some): truenas.<instance>.cgroup_<id>.cpu_some_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.cpu_some_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_cpu_pressure_stall_time_some
        instance: "$1"
        cgroup: "$2"
    # Cgroup CPU pressure stall time (full): truenas.<instance>.cgroup_<id>.cpu_full_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.cpu_full_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_cpu_pressure_stall_time_full
        instance: "$1"
        cgroup: "$2"
    # Cgroup memory pressure (some): truenas.<instance>.cgroup_<id>.mem_some_pressure.some_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.mem_some_pressure.some_*"
      labels:
        __name__: truenas_cgroup_memory_pressure_some
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup memory pressure (full): truenas.<instance>.cgroup_<id>.mem_full_pressure.full_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.mem_full_pressure.full_*"
      labels:
        __name__: truenas_cgroup_memory_pressure_full
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup memory pressure stall time (some): truenas.<instance>.cgroup_<id>.memory_some_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.memory_some_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_memory_pressure_stall_time_some
        instance: "$1"
        cgroup: "$2"
    # Cgroup memory pressure stall time (full): truenas.<instance>.cgroup_<id>.memory_full_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.memory_full_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_memory_pressure_stall_time_full
        instance: "$1"
        cgroup: "$2"
    # Cgroup IO pressure (some): truenas.<instance>.cgroup_<id>.io_some_pressure.some_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.io_some_pressure.some_*"
      labels:
        __name__: truenas_cgroup_io_pressure_some
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup IO pressure (full): truenas.<instance>.cgroup_<id>.io_full_pressure.full_<window>
    - action: graphite
      match: "truenas.*.cgroup_*.io_full_pressure.full_*"
      labels:
        __name__: truenas_cgroup_io_pressure_full
        instance: "$1"
        cgroup: "$2"
        window: "$3"
    # Cgroup IO pressure stall time (some): truenas.<instance>.cgroup_<id>.io_some_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.io_some_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_io_pressure_stall_time_some
        instance: "$1"
        cgroup: "$2"
    # Cgroup IO pressure stall time (full): truenas.<instance>.cgroup_<id>.io_full_pressure_stall_time.time
    - action: graphite
      match: "truenas.*.cgroup_*.io_full_pressure_stall_time.time"
      labels:
        __name__: truenas_cgroup_io_pressure_stall_time_full
        instance: "$1"
        cgroup: "$2"

    # =============================================================================
    # Services metrics
    # =============================================================================
    # Services CPU: truenas.<instance>.services.cpu.<service>
    - action: graphite
      match: "truenas.*.services.cpu.*"
      labels:
        __name__: truenas_service_cpu
        instance: "$1"
        service: "$2"
    # Services memory: truenas.<instance>.services.mem_usage.<service>
    - action: graphite
      match: "truenas.*.services.mem_usage.*"
      labels:
        __name__: truenas_service_memory_bytes
        instance: "$1"
        service: "$2"
    # Services IO read bytes: truenas.<instance>.services.io_read.<service>
    - action: graphite
      match: "truenas.*.services.io_read.*"
      labels:
        __name__: truenas_service_io_read_bytes_total
        instance: "$1"
        service: "$2"
    # Services IO write bytes: truenas.<instance>.services.io_write.<service>
    - action: graphite
      match: "truenas.*.services.io_write.*"
      labels:
        __name__: truenas_service_io_write_bytes_total
        instance: "$1"
        service: "$2"
    # Services IO read ops: truenas.<instance>.services.io_ops_read.<service>
    - action: graphite
      match: "truenas.*.services.io_ops_read.*"
      labels:
        __name__: truenas_service_io_read_ops_total
        instance: "$1"
        service: "$2"
    # Services IO write ops: truenas.<instance>.services.io_ops_write.<service>
    - action: graphite
      match: "truenas.*.services.io_ops_write.*"
      labels:
        __name__: truenas_service_io_write_ops_total
        instance: "$1"
        service: "$2"

    # =============================================================================
    # NFS metrics
    # =============================================================================
    # NFSD filehandles: truenas.<instance>.nfsd.filehandles.<type>
    - action: graphite
      match: "truenas.*.nfsd.filehandles.*"
      labels:
        __name__: truenas_nfsd_filehandles
        instance: "$1"
        type: "$2"
    # NFSD IO: truenas.<instance>.nfsd.io.<direction>
    - action: graphite
      match: "truenas.*.nfsd.io.*"
      labels:
        __name__: truenas_nfsd_io_bytes_total
        instance: "$1"
        direction: "$2"
    # NFSD network: truenas.<instance>.nfsd.net.<protocol>
    - action: graphite
      match: "truenas.*.nfsd.net.*"
      labels:
        __name__: truenas_nfsd_network_total
        instance: "$1"
        protocol: "$2"
    # NFSD threads: truenas.<instance>.nfsd.threads.threads
    - action: graphite
      match: "truenas.*.nfsd.threads.threads"
      labels:
        __name__: truenas_nfsd_threads
        instance: "$1"
    # NFSD RPC: truenas.<instance>.nfsd.rpc.<type>
    - action: graphite
      match: "truenas.*.nfsd.rpc.*"
      labels:
        __name__: truenas_nfsd_rpc_total
        instance: "$1"
        type: "$2"
    # NFSD read cache: truenas.<instance>.nfsd.readcache.<type>
    - action: graphite
      match: "truenas.*.nfsd.readcache.*"
      labels:
        __name__: truenas_nfsd_readcache_total
        instance: "$1"
        type: "$2"
    # NFSD proc4: truenas.<instance>.nfsd.proc4.<op>
    - action: graphite
      match: "truenas.*.nfsd.proc4.*"
      labels:
        __name__: truenas_nfsd_proc4_total
        instance: "$1"
        op: "$2"
    # NFSD proc4ops: truenas.<instance>.nfsd.proc4ops.<op>
    - action: graphite
      match: "truenas.*.nfsd.proc4ops.*"
      labels:
        __name__: truenas_nfsd_proc4ops_total
        instance: "$1"
        op: "$2"

    # =============================================================================
    # Disk metrics
    # =============================================================================
    # Disk temperature: truenas.<instance>.smart_log_smart.disktemp.<serial>.<serial>
    - action: graphite
      match: "truenas.*.smart_log_smart.disktemp.*.*"
      labels:
        __name__: truenas_disk_temperature_celsius
        instance: "$1"
        serial: "$2"
    # Disk stats bytes: truenas.<instance>.truenas_disk_stats.<serial>.<direction>
    - action: graphite
      match: "truenas.*.truenas_disk_stats._serial_*.*"
      labels:
        __name__: truenas_disk_bytes_total
        instance: "$1"
        serial: "$2"
        direction: "$3"
    # Disk stats busy: truenas.<instance>.truenas_disk_stats.busy.<serial>.busy
    - action: graphite
      match: "truenas.*.truenas_disk_stats.busy._serial_*.busy"
      labels:
        __name__: truenas_disk_busy
        instance: "$1"
        serial: "$2"
    # Disk stats ops: truenas.<instance>.truenas_disk_stats.ops.<serial>.<type>
    - action: graphite
      match: "truenas.*.truenas_disk_stats.ops._serial_*.*"
      labels:
        __name__: truenas_disk_ops_total
        instance: "$1"
        serial: "$2"
        type: "$3"

    # =============================================================================
    # ZFS ARC metrics
    # =============================================================================
    # ARC size: truenas.<instance>.truenas_arcstats.size.size
    - action: graphite
      match: "truenas.*.truenas_arcstats.size.size"
      labels:
        __name__: truenas_zfs_arc_size_bytes
        instance: "$1"
    # ARC available: truenas.<instance>.truenas_arcstats.avail.avail
    - action: graphite
      match: "truenas.*.truenas_arcstats.avail.avail"
      labels:
        __name__: truenas_zfs_arc_available_bytes
        instance: "$1"
    # ARC free: truenas.<instance>.truenas_arcstats.free.free
    - action: graphite
      match: "truenas.*.truenas_arcstats.free.free"
      labels:
        __name__: truenas_zfs_arc_free_bytes
        instance: "$1"
    # ARC L2 hits: truenas.<instance>.truenas_arcstats.l2hits.l2hits
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2hits.l2hits"
      labels:
        __name__: truenas_zfs_arc_l2_hits_total
        instance: "$1"
    # ARC L2 miss: truenas.<instance>.truenas_arcstats.l2miss.l2miss
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2miss.l2miss"
      labels:
        __name__: truenas_zfs_arc_l2_misses_total
        instance: "$1"
    # ARC L2 hit ratio: truenas.<instance>.truenas_arcstats.l2hit_p.l2hit
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2hit_p.l2hit"
      labels:
        __name__: truenas_zfs_arc_l2_hit_ratio
        instance: "$1"
    # ARC L2 miss ratio: truenas.<instance>.truenas_arcstats.l2miss_p.l2miss
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2miss_p.l2miss"
      labels:
        __name__: truenas_zfs_arc_l2_miss_ratio
        instance: "$1"
    # ARC L2 read bytes: truenas.<instance>.truenas_arcstats.l2read.l2read
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2read.l2read"
      labels:
        __name__: truenas_zfs_arc_l2_read_bytes_total
        instance: "$1"
    # ARC L2 bytes: truenas.<instance>.truenas_arcstats.l2bytes.l2bytes
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2bytes.l2bytes"
      labels:
        __name__: truenas_zfs_arc_l2_bytes
        instance: "$1"
    # ARC L2 write bytes: truenas.<instance>.truenas_arcstats.l2wbytes.l2wbytes
    - action: graphite
      match: "truenas.*.truenas_arcstats.l2wbytes.l2wbytes"
      labels:
        __name__: truenas_zfs_arc_l2_write_bytes_total
        instance: "$1"
    # ARC demand data hits: truenas.<instance>.truenas_arcstats.ddhit.ddhit
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddhit.ddhit"
      labels:
        __name__: truenas_zfs_arc_demand_data_hits_total
        instance: "$1"
    # ARC demand data misses: truenas.<instance>.truenas_arcstats.ddmis.ddmis
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddmis.ddmis"
      labels:
        __name__: truenas_zfs_arc_demand_data_misses_total
        instance: "$1"
    # ARC demand data reads: truenas.<instance>.truenas_arcstats.ddread.ddread
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddread.ddread"
      labels:
        __name__: truenas_zfs_arc_demand_data_reads_total
        instance: "$1"
    # ARC demand data hit ratio: truenas.<instance>.truenas_arcstats.ddh_p.ddh
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddh_p.ddh"
      labels:
        __name__: truenas_zfs_arc_demand_data_hit_ratio
        instance: "$1"
    # ARC demand data IO hit ratio: truenas.<instance>.truenas_arcstats.ddi_p.ddi
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddi_p.ddi"
      labels:
        __name__: truenas_zfs_arc_demand_data_io_hit_ratio
        instance: "$1"
    # ARC demand data IO hits: truenas.<instance>.truenas_arcstats.ddioh.ddioh
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddioh.ddioh"
      labels:
        __name__: truenas_zfs_arc_demand_data_io_hits_total
        instance: "$1"
    # ARC demand data miss ratio: truenas.<instance>.truenas_arcstats.ddm_p.ddm
    - action: graphite
      match: "truenas.*.truenas_arcstats.ddm_p.ddm"
      labels:
        __name__: truenas_zfs_arc_demand_data_miss_ratio
        instance: "$1"
    # ARC demand metadata hits: truenas.<instance>.truenas_arcstats.dmhit.dmhit
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmhit.dmhit"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_hits_total
        instance: "$1"
    # ARC demand metadata misses: truenas.<instance>.truenas_arcstats.dmmis.dmmis
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmmis.dmmis"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_misses_total
        instance: "$1"
    # ARC demand metadata reads: truenas.<instance>.truenas_arcstats.dmread.dmread
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmread.dmread"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_reads_total
        instance: "$1"
    # ARC demand metadata hit ratio: truenas.<instance>.truenas_arcstats.dmh_p.dmh
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmh_p.dmh"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_hit_ratio
        instance: "$1"
    # ARC demand metadata IO hit ratio: truenas.<instance>.truenas_arcstats.dmi_p.dmi
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmi_p.dmi"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_io_hit_ratio
        instance: "$1"
    # ARC demand metadata IO hits: truenas.<instance>.truenas_arcstats.dmioh.dmioh
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmioh.dmioh"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_io_hits_total
        instance: "$1"
    # ARC demand metadata miss ratio: truenas.<instance>.truenas_arcstats.dmm_p.dmm
    - action: graphite
      match: "truenas.*.truenas_arcstats.dmm_p.dmm"
      labels:
        __name__: truenas_zfs_arc_demand_metadata_miss_ratio
        instance: "$1"
    # ARC demand reads: truenas.<instance>.truenas_arcstats.dread.dread
    - action: graphite
      match: "truenas.*.truenas_arcstats.dread.dread"
      labels:
        __name__: truenas_zfs_arc_demand_reads_total
        instance: "$1"

    # =============================================================================
    # System metrics
    # =============================================================================
    # Memory info available: truenas.<instance>.truenas_meminfo.available.available
    - action: graphite
      match: "truenas.*.truenas_meminfo.available.available"
      labels:
        __name__: truenas_memory_available_bytes
        instance: "$1"
    # Memory info total: truenas.<instance>.truenas_meminfo.total.total
    - action: graphite
      match: "truenas.*.truenas_meminfo.total.total"
      labels:
        __name__: truenas_memory_total_bytes
        instance: "$1"
    # System load: truenas.<instance>.system.load.<window>
    - action: graphite
      match: "truenas.*.system.load.*"
      labels:
        __name__: truenas_system_load
        instance: "$1"
        window: "$2"
    # System uptime: truenas.<instance>.system.uptime.uptime
    - action: graphite
      match: "truenas.*.system.uptime.uptime"
      labels:
        __name__: truenas_system_uptime_seconds
        instance: "$1"
    # System active processes: truenas.<instance>.system.active_processes.active
    - action: graphite
      match: "truenas.*.system.active_processes.active"
      labels:
        __name__: truenas_system_active_processes
        instance: "$1"
    # System network: truenas.<instance>.system.net.<direction>
    - action: graphite
      match: "truenas.*.system.net.*"
      labels:
        __name__: truenas_system_network_bytes_total
        instance: "$1"
        direction: "$2"
    # System clock sync state: truenas.<instance>.system.clock_sync_state.state
    - action: graphite
      match: "truenas.*.system.clock_sync_state.state"
      labels:
        __name__: truenas_system_clock_sync_state
        instance: "$1"
    # System clock sync offset: truenas.<instance>.system.clock_sync_offset.offset
    - action: graphite
      match: "truenas.*.system.clock_sync_offset.offset"
      labels:
        __name__: truenas_system_clock_sync_offset
        instance: "$1"
    # System clock status: truenas.<instance>.system.clock_status.<status>
    - action: graphite
      match: "truenas.*.system.clock_status.*"
      labels:
        __name__: truenas_system_clock_status
        instance: "$1"
        status: "$2"

    # =============================================================================
    # Miscellaneous
    # =============================================================================
    # Netdata plugin runtime: truenas.<instance>.netdata.plugin_chartsd_nut_ups.run_time
    - action: graphite
      match: "truenas.*.netdata.plugin_chartsd_nut_ups.run_time"
      labels:
        __name__: truenas_netdata_plugin_nut_ups_runtime
        instance: "$1"
